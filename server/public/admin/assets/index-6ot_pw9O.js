import{d as E,s as T,i as g,j as F,z as j,o as n,a as z,m as e,w as a,e as l,p as i,B as k,C as r,b as u,G as h,D as U,I as q,E as A,v as G,$ as K,_ as H,K as J}from"./index-CCrR8gz-.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-DDaBj0sS.js";import{E as O,a as Q}from"./el-table-column-D7nUoGJX.js";import"./el-checkbox-DAGPPbNY.js";import"./el-tag-Cl2Qmz3l.js";import{E as W}from"./el-card-D8ZdqwP3.js";import{E as X,a as Y}from"./el-form-DkAfNPH3.js";import"./el-form-item-l0sNRNKZ.js";import{u as Z}from"./usePaging-L7-2Frc5.js";import{a as ee}from"./useDictOptions-BPbpikja.js";import{_ as te,a as oe,b as ae}from"./edit.vue_vue_type_script_setup_true_name_dhSceneEdit_lang-kdslttC5.js";import{E as le}from"./index-CLznhjfG.js";import"./el-select-CfHlCGCq.js";import"./token-DI9FKtlJ.js";import"./isEqual-JI6aO8r4.js";import"./_Uint8Array-uB5CFG-g.js";import"./_initCloneObject-CPhW_kte.js";import"./_baseClone-BB0WOwCk.js";import"./index-DHgbyyKv.js";import"./index-lIngYJLf.js";const se={class:"mt-4"},ne=["href"],re={class:"flex mt-4 justify-end"},ie=E({name:"dhSceneLists"}),$e=E({...ie,setup(me){const y=T(),f=g(!1),p=F({name:""});g([]);const{dictData:C}=ee(""),{pager:m,getLists:d,resetParams:D,resetPage:V}=Z({fetchFun:ae,params:p}),x=async v=>{await q.confirm("确定要删除？"),await oe({id:v}),d()};return d(),(v,t)=>{const B=A,b=X,_=G,I=Y,w=W,s=O,S=K,$=H,c=le,L=Q,N=M,P=j("perms"),R=J;return n(),z("div",null,[e(w,{class:"!border-none mb-4",shadow:"never"},{default:a(()=>[e(I,{class:"mb-[-16px]",model:l(p),inline:""},{default:a(()=>[e(b,{label:"场景名称",prop:"name"},{default:a(()=>[e(B,{class:"w-[280px]",modelValue:l(p).name,"onUpdate:modelValue":t[0]||(t[0]=o=>l(p).name=o),clearable:"",placeholder:"请输入场景名称"},null,8,["modelValue"])]),_:1}),e(b,null,{default:a(()=>[e(_,{type:"primary",onClick:l(V)},{default:a(()=>t[3]||(t[3]=[i("查询")])),_:1},8,["onClick"]),e(_,{onClick:l(D)},{default:a(()=>t[4]||(t[4]=[i("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),k((n(),r(w,{class:"!border-none",shadow:"never"},{default:a(()=>[u("div",se,[e(L,{data:l(m).lists},{default:a(()=>[e(s,{label:"ID",prop:"id","show-overflow-tooltip":""}),e(s,{label:"昵称",prop:"user.nickname","show-overflow-tooltip":""}),e(s,{label:"头像"},{default:a(({row:o})=>[e(S,{src:o.user.avatar,size:50},null,8,["src"])]),_:1}),e(s,{label:"场景名称",prop:"name","show-overflow-tooltip":""}),e(s,{label:"图片","min-width":"100"},{default:a(({row:o})=>[o.cover_image?(n(),r($,{key:0,src:o.cover_image,width:60,height:45,"preview-src-list":[o.cover_image],"preview-teleported":"",fit:"contain"},null,8,["src","preview-src-list"])):h("",!0)]),_:1}),e(s,{label:"视频","min-width":"100"},{default:a(({row:o})=>[u("a",{href:o.api_video_url,target:"_blank",rel:"noopener noreferrer",style:{color:"red"}},"点击播放",8,ne)]),_:1}),e(s,{label:"场景ID",prop:"scene_id","show-overflow-tooltip":""}),e(s,{label:"任务ID",prop:"task_id","show-overflow-tooltip":""}),e(s,{label:"状态",prop:"status"},{default:a(({row:o})=>[o.status==1?(n(),r(c,{key:0},{default:a(()=>t[5]||(t[5]=[i("生成中")])),_:1})):o.status==2?(n(),r(c,{key:1,type:"success"},{default:a(()=>t[6]||(t[6]=[i("生成成功")])),_:1})):(n(),r(c,{key:2,type:"danger"},{default:a(()=>t[7]||(t[7]=[i("生成失败")])),_:1}))]),_:1}),e(s,{label:"错误消息",prop:"massage","show-overflow-tooltip":""}),e(s,{label:"操作",width:"120",fixed:"right"},{default:a(({row:o})=>[k((n(),r(_,{type:"danger",link:"",onClick:pe=>x(o.id)},{default:a(()=>t[8]||(t[8]=[i(" 删除 ")])),_:2},1032,["onClick"])),[[P,["dh_scene/delete"]]])]),_:1})]),_:1},8,["data"])]),u("div",re,[e(N,{modelValue:l(m),"onUpdate:modelValue":t[1]||(t[1]=o=>U(m)?m.value=o:null),onChange:l(d)},null,8,["modelValue","onChange"])])]),_:1})),[[R,l(m).loading]]),l(f)?(n(),r(te,{key:0,ref_key:"editRef",ref:y,"dict-data":l(C),onSuccess:l(d),onClose:t[2]||(t[2]=o=>f.value=!1)},null,8,["dict-data","onSuccess"])):h("",!0)])}}});export{$e as default};

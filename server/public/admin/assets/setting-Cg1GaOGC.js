import{_ as y}from"./index-BRmHD8Bn.js";import{d as f,i as k,f as I,j as _,o as x,a as B,m as e,w as a,e as s,b as m,p as C,E as S,v as M,I as l,fg as N}from"./index-CCrR8gz-.js";import{E as q}from"./el-card-D8ZdqwP3.js";import{E as F,a as R}from"./el-form-DkAfNPH3.js";import"./el-form-item-l0sNRNKZ.js";import{_ as j}from"./picker-QZ-1jHxh.js";import"./_baseClone-BB0WOwCk.js";import"./_Uint8Array-uB5CFG-g.js";import"./_initCloneObject-CPhW_kte.js";import"./index-DHgbyyKv.js";import"./index-lIngYJLf.js";import"./index-g_vJTCrT.js";import"./index.vue_vue_type_script_setup_true_lang-DDaBj0sS.js";import"./el-tag-Cl2Qmz3l.js";import"./isEqual-JI6aO8r4.js";import"./el-select-CfHlCGCq.js";import"./index-CLznhjfG.js";import"./token-DI9FKtlJ.js";import"./el-table-column-D7nUoGJX.js";import"./el-checkbox-DAGPPbNY.js";import"./index-CqfWg3vM.js";import"./index-GVpSwJo7.js";import"./el-tree-CL0Jxy3F.js";import"./index.vue_vue_type_script_setup_true_lang-DWmGjRPQ.js";import"./el-popover-RqbIN1wR.js";import"./usePaging-L7-2Frc5.js";const D={class:"user-setting"},T={class:"w-80"},z={class:"w-80"},A={class:"w-80"},G={class:"w-80"},H={class:"w-80"},J=f({name:"userSetting"}),Vo=f({...J,setup(K){const i=k(),u=I(),o=_({avatar:"",account:"",name:"",password_old:"",password:"",password_confirm:""}),c=_({avatar:[{required:!0,message:"头像不能为空",trigger:["change"]}],name:[{required:!0,message:"请输入名称",trigger:["blur"]}]}),w=async()=>{const d=u.userInfo;for(const r in o)o[r]=d[r]},g=async()=>{if(o.password_old||o.password||o.password_confirm){if(!o.password_old)return l.msgError("请输入当前密码");if(!o.password)return l.msgError("请输入新的密码");if(!o.password_confirm)return l.msgError("请输入确定密码");if(o.password_confirm!=o.password)return l.msgError("两次输入的密码不一样")}if(o.password_old&&o.password&&o.password_confirm){if(o.password_old.length<6||o.password_old.length>32)return l.msgError("密码长度在6到32之间");if(o.password.length<6||o.password.length>32)return l.msgError("密码长度在6到32之间");if(o.password_confirm.length<6||o.password_confirm.length>32)return l.msgError("密码长度在6到32之间")}await N(o),u.getUserInfo()},V=async()=>{var d;await((d=i.value)==null?void 0:d.validate()),g()};return w(),(d,r)=>{const v=j,n=F,p=S,E=R,b=q,h=M,U=y;return x(),B("div",D,[e(b,{class:"!border-none",shadow:"never"},{default:a(()=>[e(E,{ref_key:"formRef",ref:i,class:"ls-form",model:s(o),rules:s(c),"label-width":"100px"},{default:a(()=>[e(n,{label:"头像：",prop:"avatar"},{default:a(()=>[e(v,{modelValue:s(o).avatar,"onUpdate:modelValue":r[0]||(r[0]=t=>s(o).avatar=t),limit:1},null,8,["modelValue"])]),_:1}),e(n,{label:"账号：",prop:"account"},{default:a(()=>[m("div",T,[e(p,{modelValue:s(o).account,"onUpdate:modelValue":r[1]||(r[1]=t=>s(o).account=t),disabled:""},null,8,["modelValue"])])]),_:1}),e(n,{label:"名称：",prop:"name"},{default:a(()=>[m("div",z,[e(p,{modelValue:s(o).name,"onUpdate:modelValue":r[2]||(r[2]=t=>s(o).name=t),placeholder:"请输入名称"},null,8,["modelValue"])])]),_:1}),e(n,{label:"当前密码：",prop:"password_old"},{default:a(()=>[m("div",A,[e(p,{modelValue:s(o).password_old,"onUpdate:modelValue":r[3]||(r[3]=t=>s(o).password_old=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1}),e(n,{label:"新的密码：",prop:"password"},{default:a(()=>[m("div",G,[e(p,{modelValue:s(o).password,"onUpdate:modelValue":r[4]||(r[4]=t=>s(o).password=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1}),e(n,{label:"确定密码：",prop:"password_confirm"},{default:a(()=>[m("div",H,[e(p,{modelValue:s(o).password_confirm,"onUpdate:modelValue":r[5]||(r[5]=t=>s(o).password_confirm=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(U,null,{default:a(()=>[e(h,{type:"primary",onClick:V},{default:a(()=>r[6]||(r[6]=[C("保存")])),_:1})]),_:1})])}}});export{Vo as default};

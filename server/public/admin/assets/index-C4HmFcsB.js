import{d as P,s as G,i as B,j as H,z as K,o as s,a as E,m as l,w as t,e as o,F as $,r as F,C as n,p as d,B as y,b as L,D as O,G as J,H as M,I as Q,E as W,v as X,q as Y,K as Z}from"./index-CCrR8gz-.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang-DDaBj0sS.js";import{E as te,a as le}from"./el-table-column-D7nUoGJX.js";import"./el-checkbox-DAGPPbNY.js";import"./el-tag-Cl2Qmz3l.js";import{E as ae}from"./el-card-D8ZdqwP3.js";import{E as oe,a as se}from"./el-form-DkAfNPH3.js";import{E as ne,a as de}from"./el-select-CfHlCGCq.js";import"./el-form-item-l0sNRNKZ.js";import{u as ie}from"./usePaging-L7-2Frc5.js";import{a as re}from"./useDictOptions-BPbpikja.js";import{_ as ue,a as me,b as pe}from"./edit.vue_vue_type_script_setup_true_name_dhCdkeyEdit_lang-CZ89E9L3.js";import{E as _e}from"./index-CLznhjfG.js";import"./isEqual-JI6aO8r4.js";import"./_Uint8Array-uB5CFG-g.js";import"./_initCloneObject-CPhW_kte.js";import"./_baseClone-BB0WOwCk.js";import"./token-DI9FKtlJ.js";/* empty css                       */import"./el-radio-Bn9sE85B.js";import"./index-DHgbyyKv.js";import"./index-lIngYJLf.js";const fe={class:"mt-4"},ce={class:"flex mt-4 justify-end"},be=P({name:"dhCdkeyLists"}),qe=P({...be,setup(ve){const V=G(),k=B(!1),i=H({used_status:"",code:"",status:"",points:""}),g=B([]),S=r=>{g.value=r.map(({id:e})=>e)},{dictData:C}=re("used_status,system_disable"),{pager:m,getLists:_,resetParams:T,resetPage:N}=ie({fetchFun:pe,params:i}),R=async()=>{var r;k.value=!0,await M(),(r=V.value)==null||r.open("add")},x=async r=>{await Q.confirm("确定要删除？"),await me({id:r}),_()};return _(),(r,e)=>{const U=W,f=oe,c=ne,D=de,p=X,I=se,h=ae,j=Y,u=te,b=_e,q=le,z=ee,w=K("perms"),A=Z;return s(),E("div",null,[l(h,{class:"!border-none mb-4",shadow:"never"},{default:t(()=>[l(I,{class:"mb-[-16px]",model:o(i),inline:""},{default:t(()=>[l(f,{label:"卡密",prop:"code"},{default:t(()=>[l(U,{class:"w-[280px]",modelValue:o(i).code,"onUpdate:modelValue":e[0]||(e[0]=a=>o(i).code=a),clearable:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(f,{label:"使用状态",prop:"used_status"},{default:t(()=>[l(D,{class:"w-[280px]",modelValue:o(i).used_status,"onUpdate:modelValue":e[1]||(e[1]=a=>o(i).used_status=a),clearable:"",placeholder:"请选择",style:{width:"180px"}},{default:t(()=>[l(c,{label:"全部",value:""}),(s(!0),E($,null,F(o(C).used_status,(a,v)=>(s(),n(c,{key:v,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"卡密状态",prop:"status"},{default:t(()=>[l(D,{class:"w-[280px]",modelValue:o(i).status,"onUpdate:modelValue":e[2]||(e[2]=a=>o(i).status=a),clearable:"",placeholder:"请选择",style:{width:"180px"}},{default:t(()=>[l(c,{label:"全部",value:""}),(s(!0),E($,null,F(o(C).system_disable,(a,v)=>(s(),n(c,{key:v,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(f,null,{default:t(()=>[l(p,{type:"primary",onClick:o(N)},{default:t(()=>e[6]||(e[6]=[d("查询")])),_:1},8,["onClick"]),l(p,{onClick:o(T)},{default:t(()=>e[7]||(e[7]=[d("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),y((s(),n(h,{class:"!border-none",shadow:"never"},{default:t(()=>[y((s(),n(p,{type:"primary",onClick:R},{icon:t(()=>[l(j,{name:"el-icon-Plus"})]),default:t(()=>[e[8]||(e[8]=d(" 新增 "))]),_:1})),[[w,["digitalhuman.dh_cdkey/add"]]]),y((s(),n(p,{disabled:!o(g).length,onClick:e[3]||(e[3]=a=>x(o(g)))},{default:t(()=>e[9]||(e[9]=[d(" 删除 ")])),_:1},8,["disabled"])),[[w,["digitalhuman.dh_cdkey/delete"]]]),L("div",fe,[l(q,{data:o(m).lists,onSelectionChange:S},{default:t(()=>[l(u,{type:"selection",width:"55"}),l(u,{label:"使用状态",prop:"used_status"},{default:t(({row:a})=>[a.used_status==1?(s(),n(b,{key:0},{default:t(()=>e[10]||(e[10]=[d("未使用")])),_:1})):(s(),n(b,{key:1,type:"danger"},{default:t(()=>e[11]||(e[11]=[d("已使用")])),_:1}))]),_:1}),l(u,{label:"卡密值",prop:"code","show-overflow-tooltip":""}),l(u,{label:"兑换点数",prop:"points","show-overflow-tooltip":""}),l(u,{label:"状态",prop:"status"},{default:t(({row:a})=>[a.status==1?(s(),n(b,{key:0,type:"danger"},{default:t(()=>e[12]||(e[12]=[d("禁用")])),_:1})):(s(),n(b,{key:1},{default:t(()=>e[13]||(e[13]=[d("正常")])),_:1}))]),_:1}),l(u,{label:"操作",width:"120",fixed:"right"},{default:t(({row:a})=>[y((s(),n(p,{type:"danger",link:"",onClick:v=>x(a.id)},{default:t(()=>e[14]||(e[14]=[d(" 删除 ")])),_:2},1032,["onClick"])),[[w,["digitalhuman.dh_cdkey/delete"]]])]),_:1})]),_:1},8,["data"])]),L("div",ce,[l(z,{modelValue:o(m),"onUpdate:modelValue":e[4]||(e[4]=a=>O(m)?m.value=a:null),onChange:o(_)},null,8,["modelValue","onChange"])])]),_:1})),[[A,o(m).loading]]),o(k)?(s(),n(ue,{key:0,ref_key:"editRef",ref:V,"dict-data":o(C),onSuccess:o(_),onClose:e[5]||(e[5]=a=>k.value=!1)},null,8,["dict-data","onSuccess"])):J("",!0)])}}});export{qe as default};

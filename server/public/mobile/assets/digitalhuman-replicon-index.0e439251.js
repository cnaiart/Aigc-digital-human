import{k as e,z as l,m as a,o as s,c as t,w as o,a as u,n,v as r,d as c,H as i,h as d,y as f,bb as p,C as g,av as _,b as m,r as v,F as x,f as y,t as b,g as h,G as k,aF as w,b8 as C,bd as z,q as j,s as S,e as $,i as F}from"./index-53bd83dd.js";import{_ as P}from"./z-paging.42fc37e0.js";import{_ as T}from"./tabbar.vue_vue_type_script_setup_true_lang.278729fc.js";import{_ as V}from"./u-popup.bbe0211f.js";import{_ as G}from"./_plugin-vue_export-helper.1b428a4d.js";import{b as I,r as q,d as A}from"./voice.8de5d0dd.js";import{g as E,r as H,d as J}from"./scene.2a9f7429.js";import"./u-icon.d48ac815.js";import"./u-badge.43d2931b.js";const Q=G(e({__name:"y-play",props:{width:{default:60},fontSize:{default:"50rpx"},color:{default:"--purple"},bgColor:{default:"--white"},src:{default:""}},emits:["togglePlay"],setup(e,{emit:f}){const p=e,g=l(!1),_=()=>{g.value=!g.value,f("togglePlay",{src:p.src,status:g.value})},m=e=>"number"==typeof e?`${e}px`:e.endsWith("px")?e:`${e}px`,v=a((()=>({width:m(p.width),height:m(p.width),backgroundColor:`var(${p.bgColor})`}))),x=a((()=>({fontSize:m(p.fontSize),color:`var(${p.color})`})));return(e,l)=>{const a=i,f=d;return s(),t(f,null,{default:o((()=>[u(f,{class:"flex flex-center round-circle",onClick:_,style:n(r(v))},{default:o((()=>[u(a,{class:c(["iconfont",g.value?"icon-zanting1":"icon-bofang"]),style:n(r(x))},null,8,["class","style"])])),_:1},8,["style"])])),_:1})}}}),[["__scopeId","data-v-47d97507"]]),R=G(e({__name:"index",setup(e){const a=l(1),n=l([]),G=l(0),R=l(),U=f([{name:"形象",type:1},{name:"声音",type:2}]),W=l();let B=p();g((()=>{K(1,10)}));const D=e=>{B.src!=e.src&&(B.src=e.src),e.status?B.play():B.pause()},K=(e,l)=>{2==a.value&&I({page:e,limit:l}).then((e=>{R.value.complete(e.lists)})),1==a.value&&E({page:e,limit:l}).then((e=>{R.value.complete(e.lists)}))},L=()=>{1==a.value&&k({url:"/digitalhuman/scene/add"}),2==a.value&&k({url:"/digitalhuman/voice/add"})},M=e=>{G.value=e.id,W.value.open()},N=()=>{w({title:"修改名称",editable:!0,placeholderText:"输入新的名称",success(e){e.confirm&&e.content&&X(a.value,e.content)}})},O=()=>{w({title:"确认删除?",content:"确认删除该视频?",success(e){e.confirm&&Y(a.value)}})},X=(e,l)=>{var a;const s={1:H,2:q};null==(a=s[e])||a.call(s,{id:G.value,name:l}).then((()=>{Z("修改成功"),R.value.reload()}))},Y=e=>{var l;const a={1:A,2:J};null==(l=a[e])||l.call(a,{id:G.value}).then((()=>{Z("删除成功")}))},Z=e=>{W.value.close(),C({title:e})},ee=e=>{};return _((()=>{if(B)try{B.pause(),B.destroy()}catch(e){}})),(e,l)=>{const f=i,p=d,g=z("viwe"),_=F,k=j(S("z-paging"),P),w=j(S("tabbar"),T),C=j(S("u-popup"),V);return s(),t(p,{class:"text-white"},{default:o((()=>[u(p,{class:"mb-tab"},{default:o((()=>[u(p,{class:"overflow-hidden pt-4 px-8"},{default:o((()=>[u(p,{class:"flex overflow-x-scroll w-p-100 flex-x-space-around",style:{"scrollbar-height":"none"}},{default:o((()=>[(s(!0),m(x,null,v(U,((e,l)=>(s(),t(p,{key:l},{default:o((()=>[u(p,{class:c(["px-12 p-8",a.value==e.type?"line fw-bold":""]),onClick:l=>{return s=e,a.value=s.type,R.value.reload(),void B.pause();var s}},{default:o((()=>[u(f,{class:"fs-20 text-nowrap"},{default:o((()=>[y(b(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1}),u(p,{class:"flex flex-x-space-between flex-y-center p-20"},{default:o((()=>[u(f,null,{default:o((()=>[y("我的"+b(1==a.value?"形象":"声音"),1)])),_:1}),u(p,{class:"block px-12 py-4 fs-13 bg-purple round-30",onClick:L},{default:o((()=>[y("新建")])),_:1})])),_:1}),u(k,{ref_key:"paging",ref:R,modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),onQuery:K,"use-page-scroll":""},{default:o((()=>[2==a.value?(s(),t(p,{key:0,class:"p-20 flex flex-column grid-gap-10"},{default:o((()=>[(s(!0),m(x,null,v(n.value,((e,l)=>(s(),t(g,{key:l,class:"bg-grey-3 flex flex-y-center p-15 round-8"},{default:o((()=>[u(p,{class:"flex flex-y-center grid-gap-14 flex-1"},{default:o((()=>[u(r(Q),{width:"40",fontSize:"18",src:e.local_voice_url,onTogglePlay:D},null,8,["src"]),u(p,{class:"flex flex-column grid-gap-8"},{default:o((()=>[u(f,{class:"text-white fs-16 fw-bold"},{default:o((()=>[y(b(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(f,{class:"iconfont icon-_gengduo fs-20",style:{color:"var(--purple)"},onClick:l=>M(e)},null,8,["onClick"])])),_:2},1024)))),128))])),_:1})):h("",!0),1==a.value?(s(),t(p,{key:1,class:"grid-columns-3 mt-15 grid-gap-20 px-12"},{default:o((()=>[(s(!0),m(x,null,v(n.value,((e,l)=>(s(),t(p,{class:"round-10 position-relative flex flex-center grid-gap-8 h-180 w-110 over-hidden border-grey-3 box-sizing",key:l},{default:o((()=>["1"==e.status?(s(),t(p,{key:0,class:"text-center"},{default:o((()=>[u(p,{class:"spinner mb-10"},{default:o((()=>[u(p,{class:"spinner1"})])),_:1}),u(f,{class:"fs-10"},{default:o((()=>[y("生成中...")])),_:1})])),_:1})):h("",!0),"2"==e.status?(s(),t(_,{key:1,class:"w-110 round-10 h-180",mode:"aspectFill",src:e.cover_image},null,8,["src"])):h("",!0),"3"==e.status?(s(),t(p,{key:2,class:"flex flex-column grid-gap-10 text-center",onClick:$(ee,["stop"])},{default:o((()=>[u(f,{class:"iconfont icon-zhongshi text-purple fs-20"}),u(f,{class:"fs-10"},{default:o((()=>[y("克隆失败,点击重试")])),_:1})])),_:1},8,["onClick"])):h("",!0),"1"!=e.status?(s(),t(p,{key:3,class:c(["position-absolute bottom--1 right--1 left--1 fs-12 py-6 flex flex-x-space-between px-12","2"==e.status?"bg-b":"bg-w"])},{default:o((()=>[u(f,null,{default:o((()=>[y(b(e.name),1)])),_:2},1024),u(f,{class:"iconfont icon-_gengduo text-white fs-13 ml-2",style:{transform:"rotate(90deg)"},onClick:$((l=>M(e)),["stop"])},null,8,["onClick"])])),_:2},1032,["class"])):h("",!0)])),_:2},1024)))),128))])),_:1})):h("",!0)])),_:1},8,["modelValue"])])),_:1}),u(w),u(C,{ref_key:"popup",ref:W,borderRadius:"20",bgColor:"#fff",mode:"bottom"},{default:o((()=>[u(p,{class:"p-20 text-black text-center fs-15 round-top-10"},{default:o((()=>[u(p,{class:"bg-grey-2 round-30 py-15",onClick:N},{default:o((()=>[y("重命名")])),_:1}),u(p,{class:"bg-grey-2 round-30 py-15 mt-15",onClick:O},{default:o((()=>[y("删除")])),_:1})])),_:1})])),_:1},512)])),_:1})}}}),[["__scopeId","data-v-e8982e89"]]);export{R as default};

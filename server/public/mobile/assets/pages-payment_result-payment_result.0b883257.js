import{_ as e}from"./page-meta.d3be293c.js";import{k as a,z as t,aN as s,y as r,m as l,C as u,o,b as i,a as m,w as n,v as c,f as p,t as d,c as _,g as f,F as g,p as y,q as x,s as h,H as v,h as w}from"./index-e4851b67.js";import{_ as j}from"./u-empty.606699c1.js";import{_ as b}from"./u-image.a8e24066.js";import{_ as k}from"./u-button.31c1d6f6.js";import{g as O,_ as R}from"./pay.7d948a34.js";import{_ as A}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.74289404.js";import"./u-loading.d1f9d4ff.js";const C=A(a({__name:"payment_result",setup(a){const A=y(),C={succeed:{text:"支付成功",image:"/static/images/payment/icon_succeed.png"},waiting:{text:"等待支付",image:"/static/images/payment/icon_waiting.png"}},E=t(s.LOADING),L=t({id:"",from:""}),N=r({order:{}}),D=l((()=>{const e=!!N.pay_status;return C[e?"succeed":"waiting"]})),H=()=>{A.reLaunch("/pages/index/index")},I=()=>{if("recharge"===L.value.from)A.navigateBack()};return u((async e=>{try{if(!e.id)throw new Error("订单不存在");L.value=e,await new Promise(((e,a)=>{O({order_id:L.value.id,from:L.value.from}).then((a=>{Object.assign(N,a),e(a)})).catch((e=>{a(e)}))})),E.value=s.NORMAL}catch(a){console.log(a),E.value=s.ERROR}})),(a,t)=>{const s=x(h("page-meta"),e),r=x(h("u-empty"),j),l=x(h("u-image"),b),u=v,y=w,O=x(h("u-button"),k),A=x(h("page-status"),R);return o(),i(g,null,[m(s,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),m(A,{status:E.value},{error:n((()=>[m(r,{text:"订单不存在",mode:"order"})])),default:n((()=>[m(y,{class:"payment-result p-[20rpx]"},{default:n((()=>[m(y,{class:"result bg-white p-[20rpx] rounded-md"},{default:n((()=>[m(y,{class:"flex flex-col items-center my-[40rpx]"},{default:n((()=>[m(l,{class:"status-image",src:c(D).image,width:"100",height:"100",shape:"circle"},null,8,["src"]),m(u,{class:"text-2xl font-medium mt-[20rpx]"},{default:n((()=>[p(d(c(D).text),1)])),_:1}),m(y,{class:"text-3xl font-medium mt-[20rpx]"},{default:n((()=>[p(" ¥ "+d(N.order.order_amount),1)])),_:1})])),_:1}),m(y,{class:"result-info"},{default:n((()=>[m(y,{class:"result-info__item"},{default:n((()=>[m(u,null,{default:n((()=>[p("订单编号")])),_:1}),m(u,null,{default:n((()=>[p(d(N.order.order_sn),1)])),_:1})])),_:1}),m(y,{class:"result-info__item"},{default:n((()=>[m(u,null,{default:n((()=>[p("付款时间")])),_:1}),m(u,null,{default:n((()=>[p(d(N.order.pay_time),1)])),_:1})])),_:1}),m(y,{class:"result-info__item"},{default:n((()=>[m(u,null,{default:n((()=>[p("支付方式")])),_:1}),N.pay_status?(o(),_(u,{key:0},{default:n((()=>[p(d(N.order.pay_way||"-"),1)])),_:1})):(o(),_(u,{key:1},{default:n((()=>[p("未支付")])),_:1}))])),_:1})])),_:1})])),_:1}),m(y,{class:"mt-[40rpx]"},{default:n((()=>[m(y,{class:"mb-[20rpx]"},{default:n((()=>["recharge"==L.value.from?(o(),_(O,{key:0,type:"primary",shape:"circle","hover-class":"none",onClick:I},{default:n((()=>[p(" 继续充值 ")])),_:1})):f("",!0)])),_:1}),m(y,{class:"mb-[20rpx]"},{default:n((()=>[m(O,{type:"primary",plain:"",shape:"circle","hover-class":"none",onClick:H},{default:n((()=>[p(" 返回首页 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["status"])],64)}}}),[["__scopeId","data-v-bba82a10"]]);export{C as default};

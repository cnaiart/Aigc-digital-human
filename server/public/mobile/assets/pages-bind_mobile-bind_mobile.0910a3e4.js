import{k as e,U as a,z as l,Y as o,y as t,o as s,b as r,a as d,w as i,f as u,d as n,t as m,F as p,a6 as c,a7 as b,ax as x,ae as f,q as _,s as h,h as g,H as y}from"./index-e4851b67.js";import{_ as v}from"./page-meta.d3be293c.js";import{_ as j}from"./u-input.4c37cb18.js";import{_ as k}from"./u-verification-code.7e315ea5.js";import{_ as w}from"./u-button.31c1d6f6.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.74289404.js";import"./emitter.1571a5d9.js";const $=V(e({__name:"bind_mobile",setup(e){const V=a(),$=l(""),C=o(),I=e=>{$.value=e},S=t({type:"bind",mobile:"",code:""}),U=async()=>{var e,a;if(!S.mobile)return uni.$u.toast("请输入手机号码");(null==(e=V.value)?void 0:e.canGetCode)&&(await c({scene:b.BIND_MOBILE,mobile:S.mobile}),uni.$u.toast("发送成功"),null==(a=V.value)||a.start())},B=async()=>S.mobile?S.code?(await x(S,{token:C.temToken}),uni.$u.toast("绑定成功"),C.login(C.temToken),void f()):uni.$u.toast("请输入验证码"):uni.$u.toast("请输入手机号码");return(e,a)=>{const l=_(h("page-meta"),v),o=g,t=_(h("u-input"),j),c=_(h("u-verification-code"),k),b=y,x=_(h("u-button"),w);return s(),r(p,null,[d(l,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),d(o,{class:"bg-white min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:i((()=>[d(o,{class:"w-full"},{default:i((()=>[d(o,{class:"text-2xl font-medium mb-[60rpx]"},{default:i((()=>[u("绑定手机号")])),_:1}),d(o,{class:"px-[18rpx] border border-solid border-lightc border-light rounded-[10rpx] h-[100rpx] items-center flex"},{default:i((()=>[d(t,{class:"flex-1",modelValue:S.mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>S.mobile=e),border:!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),d(o,{class:"px-[18rpx] border border-solid border-lightc border-light rounded-[10rpx] h-[100rpx] items-center flex mt-[40rpx]"},{default:i((()=>[d(t,{class:"flex-1",modelValue:S.code,"onUpdate:modelValue":a[1]||(a[1]=e=>S.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),d(o,{class:"border-l border-solid border-0 border-light pl-3 leading-4 ml-3 w-[180rpx]",onClick:U},{default:i((()=>[d(c,{ref_key:"uCodeRef",ref:V,seconds:60,onChange:I,"change-text":"x秒"},null,512),d(b,{class:n(S.mobile?"text-primary":"text-muted")},{default:i((()=>[u(m($.value),1)])),_:1},8,["class"])])),_:1})])),_:1}),d(o,{class:"mt-[40rpx]"},{default:i((()=>[d(x,{type:"primary","hover-class":"none",customStyle:{height:"100rpx",opacity:S.mobile&&S.code?"1":"0.5"},onClick:B},{default:i((()=>[u(" 确定 ")])),_:1},8,["customStyle"])])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-4605d615"]]);export{$ as default};

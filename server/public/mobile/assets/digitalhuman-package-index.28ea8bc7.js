import{aH as e,k as a,z as t,C as l,o as s,c as n,w as u,a as r,f as c,t as o,b as d,r as i,F as f,b8 as p,a3 as g,a4 as x,bo as _,G as m,H as b,h as v,bp as h,bq as k,d as y}from"./index-e4851b67.js";import{r as w}from"./recharge.94e84478.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";const S=C(a({__name:"index",setup(a){const C=t(0),S=t(!1),P=t();l((()=>{q(),z()}));const j=()=>{var a;0!=S.value?C.value?(g({title:"加载中...",mask:!0}),(a={id:C.value},e.post({url:"/digitalhuman.Package/createOrder",data:a},{isAuth:!0})).then((e=>{(e=>new Promise(((a,t)=>{WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},(function(e){"get_brand_wcpay_request:ok"==e.err_msg?a(e):t()}))})))(e).then((e=>{x(),p({title:"支付成功"}),setTimeout((()=>{}),500)})).catch((e=>{x(),p({title:"支付失败",icon:"none"})}))}))):p({title:"请选择套餐",icon:"none"}):p({title:"请先阅读充值协议",icon:"none"})},q=()=>{var a;(a={},e.get({url:"/digitalhuman.Package/lists",data:a},{isAuth:!0})).then((e=>{P.value=e.lists}))},A=e=>{1==e.detail.value.length?S.value=!0:S.value=!1},B=()=>{_({url:"/packages/pages/user_wallet/user_wallet"})},I=t({}),z=async()=>{I.value=await w()},H=()=>{m({url:"/pages/agreement/agreement?type=recharge"})};return(e,a)=>{const t=b,l=v,p=h,g=k;return s(),n(l,{class:"y-page"},{default:u((()=>[r(l,{class:"bg-blue py-30 px-20 flex flex-y-center flex-x-space-between"},{default:u((()=>[r(l,{class:"flex flex-column grid-gap-10 text-white"},{default:u((()=>[r(t,{class:"fs-15"},{default:u((()=>[c("我的算力")])),_:1}),r(t,{class:"fw-bold fs-25"},{default:u((()=>[c(o(I.value.points),1)])),_:1})])),_:1}),r(l,{class:"bg-white round-30 text-center py-4 px-12 text-blue",onClick:B},{default:u((()=>[c("明细")])),_:1})])),_:1}),r(l,{class:"p-20"},{default:u((()=>[r(l,{class:"p-6 round-2"},{default:u((()=>[r(l,{class:"grid-columns-3 grid-gap-12 text-center"},{default:u((()=>[(s(!0),d(f,null,i(P.value,((e,a)=>(s(),n(l,{class:y(["rounded-3 flex flex-column py-15 round-8 grid-gap-10 box-shadow",C.value==e.id?"border-blue mask":"border-grey-2"]),key:a,onClick:a=>C.value=e.id},{default:u((()=>[r(t,{class:y(["fs-14",C.value==e.id?"text-blue":"text-333"])},{default:u((()=>[c(o(e.name),1)])),_:2},1032,["class"]),r(t,{class:"fs-16 fw-bold"},{default:u((()=>[c(o(e.points),1)])),_:2},1024),r(t,{class:y(["fw-bold fs-14 text-blue",C.value==e.id?"text-blue":"text-333"])},{default:u((()=>[c("￥"+o(e.price),1)])),_:2},1032,["class"])])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1}),r(l,{class:"p-20 position-fixed bottom-0 box-sizing w-p-100"},{default:u((()=>[r(l,{class:"bg-blue round-30 py-10 text-center text-white",onClick:j},{default:u((()=>[c("立即充值")])),_:1}),r(l,{class:"fs-13 flex flex-x-center mt-10 flex-y-center"},{default:u((()=>[r(g,{onChange:A,activeBorderColor:"#a853fd",iconColor:"#a853fd"},{default:u((()=>[r(p,{value:"1",checked:S.value,style:{transform:"scale(0.7)"}},null,8,["checked"])])),_:1}),c(" 已阅读"),r(t,{class:"text-blue",onClick:H},{default:u((()=>[c("《充值协议》")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-5d7e8aa9"]]);export{S as default};

import{k as e,z as l,Y as a,C as s,o as t,c as u,w as r,a as o,f as c,t as f,v as n,b as d,r as p,F as i,a3 as _,b8 as m,a4 as v,ae as x,H as y,az as g,h as b,q as h,s as w,d as k}from"./index-53bd83dd.js";import{_ as j}from"./u-popup.bbe0211f.js";import{y as C}from"./recorder.f5d42c93.js";import{y as T}from"./y-popup.8a2e1f35.js";import{g as V,u as q,c as z}from"./voice.8de5d0dd.js";import{_ as A}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.d48ac815.js";import"./u-parse.9d9c0a03.js";import"./index.87441216.js";const E=A(e({__name:"add",setup(e){const A=l(),E=l(),F=l(),H=l({file:"",duration:0,currentTime:0,url:""}),I=l({name:"",local_voice_url:"",duration:0}),R=a();s((()=>{S()}));const S=()=>{V().then((e=>{A.value=e.lists,F.value=A.value[0]}))},U=()=>{E.value.open()},X=e=>{H.value.file=e.file,H.value.duration=e.duration,H.value.url=e.url},Y=()=>{if(""==I.value.local_voice_url){let e={};e={file:H.value.file},q(e,R.token).then((e=>{I.value.local_voice_url=e.url,B()}))}else B()},B=()=>{_({title:"创建中..."}),z(I.value).then((e=>{m({title:"添加成功",icon:"none"}),v(),setTimeout((()=>{x()}),500)}))};return(e,l)=>{const a=y,s=g,_=b,m=h(w("u-popup"),j);return t(),u(_,{class:"p-20 text-white"},{default:r((()=>[o(_,{class:"bg-grey p-15 round-8"},{default:r((()=>[o(a,{class:"fs-17 fw-600"},{default:r((()=>[c("名字")])),_:1}),o(s,{placeholder:"请输入声音名称","placeholder-class":"fs-12",class:"fs-12 mt-8",modelValue:I.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>I.value.name=e)},null,8,["modelValue"])])),_:1}),o(_,{class:"bg-grey mt-7 p-15 round-8"},{default:r((()=>[o(a,{class:"fs-17 fw-600"},{default:r((()=>[c("参考音频")])),_:1}),o(_,{class:"round-8 border-purple p-15 mt-7"},{default:r((()=>[o(_,{class:"flex flex-x-space-between mb-6"},{default:r((()=>[o(a,{class:"fs-15 fw-600"},{default:r((()=>[c("朗读文本")])),_:1}),o(_,{class:"bg-white fs-12 round-4 text-purple flex flex-y-center px-6 py-4",onClick:U},{default:r((()=>[o(a,{class:"iconfont icon-qiehuan",style:{color:"var(--purple)"}}),c(" 切换文本 ")])),_:1})])),_:1}),o(a,{class:"fs-11 text-grey-4 ls-2"},{default:r((()=>{var e;return[c(f(null==(e=F.value)?void 0:e.content),1)]})),_:1})])),_:1}),o(_,{class:"p-30"},{default:r((()=>[o(n(C),{onSuccess:X})])),_:1})])),_:1}),o(_,{class:"p-20 text-white text-center fw-600 ls-2"},{default:r((()=>[""==I.value.name||""==H.value.url?(t(),u(_,{key:0,class:"bg-purple-1 round-30 py-15"},{default:r((()=>[c("提交")])),_:1})):(t(),u(_,{key:1,class:"bg-purple round-30 py-15",onClick:Y},{default:r((()=>[c("提交")])),_:1}))])),_:1}),o(m,{ref_key:"popup",ref:E,borderRadius:"20",mode:"bottom"},{default:r((()=>[o(_,{class:"p-20 text-black",style:{"max-height":"50vh"}},{default:r((()=>[o(_,{class:"fw-600 text-center"},{default:r((()=>[o(a,null,{default:r((()=>[c("选择朗读文本")])),_:1})])),_:1}),o(_,{class:"flex flex-column mt-7 grid-gap-6 overflow-y-scroll"},{default:r((()=>[(t(!0),d(i,null,p(A.value,((e,l)=>(t(),u(_,{class:k(["round-10 p-15 bg-grey-2 flex flex-column grid-gap-4",F.value.id==e.id?"border-purple":"border-grey-2"]),key:l,onClick:l=>{return a=e,F.value=a,void E.value.close();var a}},{default:r((()=>[o(a,{class:"fw-600"},{default:r((()=>[c(f(e.name),1)])),_:2},1024),o(a,{class:"ls-2 fs-12"},{default:r((()=>[c(f(e.content),1)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1},512),o(n(T))])),_:1})}}}),[["__scopeId","data-v-0ff53010"]]);export{E as default};
